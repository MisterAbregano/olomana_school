<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Mr. Abregano‚Äôs Classroom</title>

  <!-- Montserrat font for modern look -->
  <link 
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" 
    rel="stylesheet">

  <style>
    /* ---------- Variables ---------- */
    :root {
      --primary:       #004d40;
      --accent:        #00bfa5;
      --card-bg:       rgba(255,255,255,0.9);
      --radius:        12px;
      --shadow:        0 4px 20px rgba(0,0,0,0.1);
      --border-thick:  4px;
      --ticker-bg:     #222;
      --ticker-color:  #fff;
    }

    /* ---------- Reset & Base ---------- */
    * { box-sizing: border-box; margin:0; padding:0 }
    html, body {
      height:100%; font-family:'Montserrat',sans-serif;
      background:#f5f0e6;
      overflow-x:hidden;
    }

    /* ---------- Broadcast Ticker ---------- */
    .ticker {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: var(--ticker-bg);
      color: var(--ticker-color);
      height: 2.5rem;
      display: flex;
      align-items: center;
      overflow: hidden;
      z-index: 1000;
      padding: 0 1rem;
    }
    .ticker-content {
      display: inline-block;
      white-space: nowrap;
      animation: scroll 20s linear infinite;
    }
    @keyframes scroll {
      0%   { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    .ticker span {
      display: inline-block;
      margin-right: 2rem;
      font-size: 0.9rem;
    }

    /* ---------- Page Wrapper ---------- */
    .wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      max-width: 1000px;
      width: 90%;
      margin: 4rem auto 2rem; /* push down below ticker */
    }

    /* ---------- Section Cards ---------- */
    .section {
      flex: 1 1 300px;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.5rem;
    }
    h2 {
      text-align:center;
      margin-bottom:1rem;
      color: var(--primary);
    }
    p {
      text-align:center;
      color:#333;
      font-size: .95rem;
      margin-bottom:1rem;
    }

    /* ---------- Buttons ---------- */
    .buttons {
      text-align:center;
      margin-bottom:1rem;
    }
    .button-link {
      display:inline-block; margin:.25rem;
      padding:.6rem 1.2rem;
      background: var(--accent); color:#fff;
      border: var(--border-thick) solid var(--accent);
      border-radius: var(--radius);
      text-decoration:none; font-size:.95rem;
      transition:background .2s,border-color .2s;
    }
    .button-link:hover {
      background: var(--primary);
      border-color: var(--primary);
    }
    .button-link.disabled {
      background: #aaa; border-color: #aaa;
      pointer-events: none;
    }

    /* ---------- Social Embeds ---------- */
    .embed {
      margin:1rem 0; border-radius:var(--radius); overflow:hidden;
    }
    .instagram {
      border: var(--border-thick) solid;
      border-image: linear-gradient(
        to right,
        #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%
      ) 1;
    }
    .pixelfed {
      border: var(--border-thick) solid var(--accent);
    }
    .embed iframe, .embed a {
      display:block; width:100%; height:300px; text-align:center;
      text-decoration:none; color:var(--primary); font-weight:500;
    }

    /* ---------- Profile & Bio (Right-justified) ---------- */
    .profile {
      text-align: right;
    }
    .profile img {
      width:140px; height:140px; object-fit:cover;
      border-radius:50%; border:var(--border-thick) solid var(--accent);
      box-shadow:var(--shadow); margin-bottom:1rem;
    }
    .bio {
      color:#222; line-height:1.4; font-size:.95rem;
    }
    .link-list {
      list-style:none; padding:0; margin:1rem 0; text-align:right;
    }
    .link-list li { margin:.5rem 0; }
    .link-list a {
      color: var(--primary); text-decoration:none; font-weight:500;
    }
    .link-list a:hover { text-decoration:underline; }

    /* ---------- Hidden YouTube Player ---------- */
    #yt { display:none; }
  </style>
</head>

<body>
      <!-- ======== EVENTS TICKER (driven by ICS) ======== -->
  <div class="ticker" id="events-ticker">
    <span>Loading upcoming events‚Ä¶</span>
  </div>
  <!-- ======== ICS-driven ticker setup ======== -->
  <script src="https://cdn.jsdelivr.net/npm/ical.js@2.2.0/build/ical.min.js"></script>
  <script>
    (async function() {
      // fetch your ICS file (must be in the repo root)
      const res = await fetch('./olomana_calendar.ics');
      const icsText = await res.text();

      // parse and filter events
      const jcal = ICAL.parse(icsText);
      const comp = new ICAL.Component(jcal);
      const vevents = comp.getAllSubcomponents('vevent');
      const now = new Date();
      const cutoff = new Date(Date.now() + 30*24*60*60*1000); // 30 days

      const upcoming = vevents
        .map(c => new ICAL.Event(c))
        .filter(ev => {
          const d = ev.startDate.toJSDate();
          return d >= now && d <= cutoff;
        })
        .sort((a,b) => a.startDate.toJSDate() - b.startDate.toJSDate())
        .slice(0,5)
        .map(ev => {
          const d = ev.startDate.toJSDate();
          return d.toLocaleDateString('en-US',{month:'short',day:'numeric'}) 
                 + ' ‚Äì ' + ev.summary;
        });

      // render into the ticker
      document.getElementById('events-ticker').innerHTML =
        upcoming.map(txt => `<span>${txt}</span>`).join('');
    })();
  </script>

  <style>
    /* Replace your old .ticker .ticker-content rules */
    .ticker {
      position: fixed; top:0; left:0; right:0;
      background: var(--ticker-bg);
      color: var(--ticker-color);
      height:2.5rem; display:flex; align-items:center;
      overflow:hidden; padding:0 1rem; z-index:1000;
    }
    .ticker span {
      display:inline-block;
      padding:0 2rem;
      white-space:nowrap;
      animation: scroll-ticker 15s linear infinite;
    }
    @keyframes scroll-ticker {
      0%   { transform:translateX(100%); }
      100% { transform:translateX(-100%); }
    }
  </style>



  <!-- ======== MAIN CONTENT ======== -->
  <div class="wrapper">
    <!-- Zoom Conference Hub -->
    <div class="section">
      <h2>üìπ Zoom Conference Hub</h2>
      <p><em>By appointment only</em></p>
      <div class="buttons">
        <a href="https://zoom.us/client/latest/ZoomInstaller.exe" target="_blank" class="button-link">
          üíª Download Zoom (PC)
        </a>
        <a href="https://zoom.us/download" target="_blank" class="button-link">
          üì± Get Zoom (Mobile)
        </a>
        <a href="#" class="button-link disabled">
          üìÜ Schedule (Coming Soon)
        </a>
      </div>
      <p>
        If you‚Äôre a student or guardian, email 
        <strong><a href="mailto:ryan.abregano@k12.hi.us">Mr. A‚Äôs</a></strong> to request access.
      </p>
    </div>

    <!-- Social Feeds (moved above bio) -->
    <div class="section">
      <h2>üì∏ Social Feeds</h2>

      <!-- Instagram embed -->
      <div class="embed instagram">
        <iframe 
          src="https://www.instagram.com/olomanaschool/embed" 
          title="Olomana Instagram"></iframe>
      </div>

      <!-- ======== Pixelfed Logo Card ======== -->
<div class="section">
  <h2>üåê Pixelfed</h2>
  <img
    src="./pixelfed-logo.svg"
    alt="Pixelfed Logo"
    style="
      display: block;
      width: 100%;
      max-width: 200px;
      height: auto;
      margin: 0.5rem auto;
      border: 4px solid var(--accent);
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    "
  />
  <p style="text-align: center; font-size: 0.9rem; color: #555;">
    <a href="https://pixelfed.social/register" target="_blank" style="color: var(--primary); text-decoration: none; font-weight: 500;">
      Sign up on Pixelfed
    </a>
  </p>
</div>


    <!-- Profile & Bio (swapped into right-column) -->
<!-- ======== Profile & Bio ======== -->
<!-- ======== Profile & Bio ======== -->
<div class="section profile">
  <h2>üë§ Profile &amp; Bio</h2>

  <!-- Headshot (now uploaded as IMG_0041.JPG) -->
  <img 
    src="./IMG_0041.JPG" 
    alt="Mr. Abregano headshot"
    style="
      width:140px;
      height:140px;
      object-fit:cover;
      border-radius:50%;
      border:4px solid var(--accent);
      box-shadow:var(--shadow);
      margin-bottom:1rem;
    "
  />

  <!-- Right-justified bio text -->
  <div class="bio" style="text-align: right;">
    <p>
      <strong>Ryan Abregano</strong> is a cultural educator and practitioner of Native Hawaiian perspectives.  
      Currently an Educational Assistant III at Olomana School in Hawai ªi,  
      he encourages all of his students to discover their place in Hawai ªi,  
      enriches students with cultural development,  
      and blends technology thoughtfully toward sensitive Kanaka Maoli perspectives.
    </p>
  </div>

  <!-- Quick Links -->
  <ul class="link-list" style="text-align: right;">
    <li>üè´ <a href="mailto:ryan.abregano@k12.hi.us">Mr. A‚Äôs</a> (Google Classroom Access)</li>
    <li>‚öõÔ∏è <a href="https://www.olomanaschoolhi.k12.hi.us/apps/pages/index.jsp?type=d&amp;uREC_ID=1959022" target="_blank">
      Infinite Campus (Parent Portal)
    </a></li>
  </ul>
</div>

  <!-- ======== Hidden Kauhale Chant ======== -->
  <div id="yt"></div>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    // Render the world clock (UTC) and HST time every second
    function updateClocks() {
      document.getElementById('world-clock').textContent =
        new Date().toLocaleTimeString('en-US', { timeZone: 'UTC' });
      document.getElementById('hst-clock').textContent =
        new Date().toLocaleTimeString('en-US', { timeZone: 'Pacific/Honolulu' });
    }
    setInterval(updateClocks, 1000);
    updateClocks();

    // Initialize hidden YouTube player for auto-playing chant
    function onYouTubeIframeAPIReady() {
      new YT.Player('yt', {
        height:'0', width:'0',
        videoId:'HOK74BGCYXM',
        playerVars: {
          autoplay:1, loop:1, playlist:'HOK74BGCYXM',
          controls:0, modestbranding:1, rel:0, start:0
        },
        events: {
          onReady: e => {
            e.target.setVolume(10);
            e.target.playVideo();
          }
        }
      });
    }
  </script>
</body>
</html>
